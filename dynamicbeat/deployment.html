<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Deployment - Scorestack Documentation</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../introduction.html">Introduction</a></li><li class="chapter-item "><a href="../checks.html"><strong aria-hidden="true">1.</strong> Checks</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../checks/file.html"><strong aria-hidden="true">1.1.</strong> The Check File</a></li><li class="chapter-item "><a href="../checks/metadata.html"><strong aria-hidden="true">1.2.</strong> Check Metadata</a></li><li class="chapter-item "><a href="../checks/definition.html"><strong aria-hidden="true">1.3.</strong> Check Definition</a></li><li class="chapter-item "><a href="../checks/attributes.html"><strong aria-hidden="true">1.4.</strong> Check Attributes</a></li><li class="chapter-item "><a href="../checks/adding_checks.html"><strong aria-hidden="true">1.5.</strong> Adding Checks</a></li><li class="chapter-item "><a href="../checks/reference.html"><strong aria-hidden="true">1.6.</strong> Check Reference</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../checks/reference/dns.html"><strong aria-hidden="true">1.6.1.</strong> DNS</a></li><li class="chapter-item "><a href="../checks/reference/ftp.html"><strong aria-hidden="true">1.6.2.</strong> FTP</a></li><li class="chapter-item "><a href="../checks/reference/http.html"><strong aria-hidden="true">1.6.3.</strong> HTTP</a></li><li class="chapter-item "><a href="../checks/reference/icmp.html"><strong aria-hidden="true">1.6.4.</strong> ICMP</a></li><li class="chapter-item "><a href="../checks/reference/imap.html"><strong aria-hidden="true">1.6.5.</strong> IMAP</a></li><li class="chapter-item "><a href="../checks/reference/ldap.html"><strong aria-hidden="true">1.6.6.</strong> LDAP</a></li><li class="chapter-item "><a href="../checks/reference/mysql.html"><strong aria-hidden="true">1.6.7.</strong> MySQL</a></li><li class="chapter-item "><a href="../checks/reference/noop.html"><strong aria-hidden="true">1.6.8.</strong> Noop</a></li><li class="chapter-item "><a href="../checks/reference/smb.html"><strong aria-hidden="true">1.6.9.</strong> SMB</a></li><li class="chapter-item "><a href="../checks/reference/smtp.html"><strong aria-hidden="true">1.6.10.</strong> SMTP</a></li><li class="chapter-item "><a href="../checks/reference/ssh.html"><strong aria-hidden="true">1.6.11.</strong> SSH</a></li><li class="chapter-item "><a href="../checks/reference/vnc.html"><strong aria-hidden="true">1.6.12.</strong> VNC</a></li><li class="chapter-item "><a href="../checks/reference/winrm.html"><strong aria-hidden="true">1.6.13.</strong> WinRM</a></li><li class="chapter-item "><a href="../checks/reference/xmpp.html"><strong aria-hidden="true">1.6.14.</strong> XMPP</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../dynamicbeat.html"><strong aria-hidden="true">2.</strong> Dynamicbeat</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../dynamicbeat/configuration.html"><strong aria-hidden="true">2.1.</strong> Configuration</a></li><li class="chapter-item expanded "><a href="../dynamicbeat/deployment.html" class="active"><strong aria-hidden="true">2.2.</strong> Deployment</a></li><li class="chapter-item "><a href="../dynamicbeat/overrides.html"><strong aria-hidden="true">2.3.</strong> Overrides</a></li><li class="chapter-item "><a href="../dynamicbeat/reference/dynamicbeat.html"><strong aria-hidden="true">2.4.</strong> Commands</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../dynamicbeat/reference/dynamicbeat_config.html"><strong aria-hidden="true">2.4.1.</strong> config</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../dynamicbeat/reference/dynamicbeat_config_save.html"><strong aria-hidden="true">2.4.1.1.</strong> save</a></li><li class="chapter-item "><a href="../dynamicbeat/reference/dynamicbeat_config_view.html"><strong aria-hidden="true">2.4.1.2.</strong> view</a></li></ol></li><li class="chapter-item "><a href="../dynamicbeat/reference/dynamicbeat_run.html"><strong aria-hidden="true">2.4.2.</strong> run</a></li><li class="chapter-item "><a href="../dynamicbeat/reference/dynamicbeat_setup.html"><strong aria-hidden="true">2.4.3.</strong> setup</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../dynamicbeat/reference/dynamicbeat_setup_checks.html"><strong aria-hidden="true">2.4.3.1.</strong> checks</a></li><li class="chapter-item "><a href="../dynamicbeat/reference/dynamicbeat_setup_elasticsearch.html"><strong aria-hidden="true">2.4.3.2.</strong> elasticsearch</a></li><li class="chapter-item "><a href="../dynamicbeat/reference/dynamicbeat_setup_kibana.html"><strong aria-hidden="true">2.4.3.3.</strong> kibana</a></li></ol></li></ol></li></ol></li><li class="chapter-item "><a href="../deployment.html"><strong aria-hidden="true">3.</strong> Deployment</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../deployment/binaries.html"><strong aria-hidden="true">3.1.</strong> Obtaining Binaries</a></li><li class="chapter-item "><a href="../deployment/cloning.html"><strong aria-hidden="true">3.2.</strong> Cloning the Repository</a></li><li class="chapter-item "><a href="../deployment/small.html"><strong aria-hidden="true">3.3.</strong> Small Architecture</a></li><li class="chapter-item "><a href="../deployment/medium.html"><strong aria-hidden="true">3.4.</strong> Medium Architecture</a></li><li class="chapter-item "><a href="../deployment/setup.html"><strong aria-hidden="true">3.5.</strong> Setup</a></li></ol></li><li class="chapter-item "><a href="../design.html"><strong aria-hidden="true">4.</strong> Design</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../design/architecture.html"><strong aria-hidden="true">4.1.</strong> Elastic Stack Architecture</a></li><li class="chapter-item "><a href="../design/permissions.html"><strong aria-hidden="true">4.2.</strong> User Roles</a></li><li class="chapter-item "><a href="../design/check.html"><strong aria-hidden="true">4.3.</strong> Life of a Check</a></li></ol></li><li class="chapter-item "><a href="../building.html"><strong aria-hidden="true">5.</strong> Building Binaries</a></li><li class="chapter-item "><a href="../appendix/faq.html"><strong aria-hidden="true">6.</strong> Appendix A - FAQ</a></li><li class="chapter-item "><div><strong aria-hidden="true">7.</strong> Appendix B - Glossary</div></li><li class="chapter-item "><div><strong aria-hidden="true">8.</strong> Appendix C - Developer Processes</div></li><li class="spacer"></li><li class="chapter-item affix "><a href="../contributors.html">Contributors</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Scorestack Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="deployment"><a class="header" href="#deployment">Deployment</a></h1>
<p>Once Scorestack has been deployed and you've uploaded some checks, Dynamicbeat needs to be deployed to a host for checks to run. Currently, the only supported way of deploying Dynamicbeat is by running it as a systemd service on a Linux system.</p>
<h2 id="system-requirements"><a class="header" href="#system-requirements">System Requirements</a></h2>
<p>Currently, Dynamicbeat is only supported on Linux systems. Please note that Dynamicbeat can run checks <em>against</em> non-Linux systems (like Windows or Mac), but Dynamicbeat itself must run on Linux.</p>
<p>The system that Dynamicbeat runs on must be able to access the Elasticsearch HTTP API endpoints. Additionally, the system should be able to access the services that Dynamicbeat will be running checks against. Varying the placement of Dynamicbeat on the network can help mask the check traffic slightly. For example, running Dynamicbeat on the same network that red team traffic originates from is a common practice.</p>
<p>Dynamicbeat can typically run fine with minimal system resources. In the past, Dynamicbeat has worked fine with only 2 CPU cores and 2 GB of RAM, but you should always perform some testing to determine what will work best for your environment.</p>
<h3 id="icmp-permissions"><a class="header" href="#icmp-permissions">ICMP Permissions</a></h3>
<p>The ICMP library that Dynamicbeat's ICMP protocol uses requires specific sysctl parameters to be set in order to work. The following command can be used to immediately set the sysctl parameter, but the change will not persist on a reboot. You should set the parameter in <code>/etc/sysctl.d</code> (or the equivalent on your distribution) in order for changes to persist on reboot.</p>
<pre><code class="language-shell">sudo sysctl -w net.ipv4.ping_group_range=&quot;0   2147483647&quot;
</code></pre>
<p>For more information on the ICMP permissions required, see <a href="https://github.com/go-ping/ping#note-on-linux-support">the library's documentation</a>.</p>
<h3 id="dynamicbeat-disk-impact"><a class="header" href="#dynamicbeat-disk-impact">Dynamicbeat Disk Impact</a></h3>
<p>When the systems that Dynamicbeat runs checks against are using shared network storage, the available IOPS is very important, especially for larger competitions. This is because each check that Dynamicbeat runs can trigger multiple disk I/O operations on the system being checked. Additionally, checks are executed nearly simultaneously, so a round of checks can have a serious impact on disk performance.</p>
<p>If possible, try stress testing your infrastructure before the start of the competition by running multiple instances of Dynamicbeat simultaneously. While running this stress test, try interacting with the competition systems. If your competition has any &quot;Desktop Experience&quot; (GUI) Windows systems, try interacting with them - opening multiple programs, performing searches in the Start menu, etc. - since the experience on Windows systems can be particularly sensitive to a lack of sufficient IOPS.</p>
<p>If you do experience IOPS issues, one possible solution is to increase the time between rounds. By default rounds run every 30 seconds, but increasing this to 2 or 3 minutes (or even more) can help.</p>
<h2 id="service-setup"><a class="header" href="#service-setup">Service Setup</a></h2>
<p>The recommended way of running Dynamicbeat is via a systemd service. To configure the service, you can use the following systemd unit file:</p>
<pre><code>[Unit]
Description=Dynamicbeat
After=network.target

[Service]
Type=simple
WorkingDirectory=/opt/dynamicbeat
ExecStart=/opt/dynamicbeat/dynamicbeat run

[Install]
WantedBy=multi-user.target
</code></pre>
<blockquote>
<p>This file is also available for download <a href="./dynamicbeat.service">here</a>.</p>
</blockquote>
<p>If using the above service file, you should save it to <code>/etc/systemd/system/dynamicbeat.service</code>. You can then start Dynamicbeat by running the following commands:</p>
<pre><code class="language-shell">sudo systemctl daemon-reload
sudo systemctl start dynamicbeat.service
sudo systemctl enable dynamicbeat.service
</code></pre>
<p>Note that this service file assumes that the Dynamicbeat binary is placed at <code>/opt/dynamicbeat/dynamicbeat</code>, and that the configuration file is  at <code>/opt/dynamicbeat/dynamicbeat.yml</code>. If your configuration file is placed somewhere else or named differently, add the <code>--config /path/to/dynamicbeat/config</code> argument to the <code>ExecStart</code> line in your service file.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../dynamicbeat/configuration.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../dynamicbeat/overrides.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../dynamicbeat/configuration.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../dynamicbeat/overrides.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
